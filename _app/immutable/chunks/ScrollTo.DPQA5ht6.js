import{g as u}from"./scheduler.CWsSAhvD.js";import{w}from"./index.Cfjf3xWC.js";function p(e){return e<.5?4*e*e*e:.5*Math.pow(2*e-2,3)+1}const d=w([]),v=w({offset:0,duration:500,passive:!0,easing:p,onStart:()=>{},onDone:()=>{}}),h=u(v),y=()=>h,E=e=>e.replace(/[^A-Z0-9]/gi,"").toLowerCase(),L=(e,n)=>{const t=e.filter(s=>s.reference===n);return t.length?t[0].node:null},x=e=>({y:e.offsetTop,x:e.offsetLeft}),l=(e,n,t,s,r)=>t>s?n:e+(n-e)*r(t/s),O=async(e,n)=>new Promise(t=>{const{start:s,end:r,duration:a,easing:c}=e,f=Date.now();let i=()=>{const o=Date.now()-f,m=l(s.x,r.x,o,a,c),g=l(s.y,r.y,o,a,c);if(n({x:m,y:g}),o>a)return t();window.requestAnimationFrame(i)};window.addEventListener("wheel",function o(){i=()=>{},window.removeEventListener("wheel",o)}),window.requestAnimationFrame(i)}),b=async(e,n)=>{const{duration:t,easing:s,offset:r}=n,a=window.pageYOffset,c=window.pageXOffset,f=e.x+r,i=e.y+r;await O({start:{x:c,y:a},end:{x:f,y:i},duration:t,easing:s},o=>{window.scroll(o.x,o.y)})},A=u(d),T=async(e,n)=>{n.passive||e.preventDefault();const{ref:t,onDone:s,onStart:r}=n,a=n.duration,c=n.offset,f=n.easing,i=L(A,t);if(!i)throw new Error(`Element reference '${t}' not found`);const o=x(i);r&&r({element:i,offset:c,duration:a,endPosition:o}),await b(o,{duration:a,offset:c,easing:f}),s&&s({element:i,offset:c,duration:a,endPosition:o})},P=(e,n)=>{if(!n)throw new Error("scrollTo require a options");let t=Object.assign({ref:""},y());if(typeof n=="string"?t.ref=n:t=Object.assign(t,n),t.ref=E(t.ref),!t.ref)throw new Error("scrollTo require a reference");e instanceof HTMLAnchorElement&&(e.href=`#${t.ref}`),e instanceof HTMLAnchorElement||(e.style.cursor="pointer");const s=r=>T(r,t);return e.addEventListener("click",s,{passive:t.passive}),e.addEventListener("touchstart",s,{passive:t.passive}),{destroy(){e.removeEventListener("click",s),e.removeEventListener("touchstart",s)}}};export{P as a,d as e,E as s};
